<!DOCTYPE html>
<html>

<head>
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
    <link rel="stylesheet" href="./style.css" />
</head>

<body>
    <div id='container' ng-app='gw2pricer' ng-controller='gw2Controller'>
        <table class='table table-striped'>
            <thead>
                <tr>
                    <th></th>
                    <th>Item Name</th>
                    <th>ID</th>
                    <th>Price</th>
                    <th>Recipes</th>
                    <th>Upgrade</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat='item in priceFull'>
                    <td><img src='{{item.pic}}' class='itemIcon' /></td>
                    <td>{{item.name}}</td>
                    <td>{{item.itId}}</td>
                    <td>{{item.price|gw2Currency}}</td>
                    <td class='btn btn-info' ng-click='getRecipes(item)'>&#127858; Get Recipes</td>
                    <td ng-if='item.isCore!="none"' ng-class='(item.upg>0)?"doUpg":"dontUpg"'>{{item.upg}}</td>
                    <td ng-if='item.isCore=="none"'>N/A</td>
                </tr>
            </tbody>
        </table>
        <button ng-click='refreshPrices();'>Refresh Price List</button>
        <br/>
        <button ng-click='alertMe(priceFull);'>Price Full</button>
        <div id='recipePanel' class='panel panel-primary draggable col-md-6' ng-show='recipeShow'>
            <div class='panel-heading'>Recipes for {{currItem.name}}
                <div class='btn btn-danger pull-right' ng-click='recipeShow=false'>X</div>
            </div>
            <div class='panel-body'>
                <label for='quantLimit'>Limit number of required items to: </label>{{quantLim}}
                <input type='range' id='quantLimit' min='1' max='500' ng-model='quantLim' />
                <table class='table table-striped'>
                    <thead>
                        <tr>
                            <th class='info sortBut' ng-click='sortRec("name");'>Recipe Produces <span ng-if='sort=="name" && reverse'>&#9650;</span><span ng-if='sort=="name" && !reverse'>&#9660;</span></th>
                            <th class='info sortBut' ng-click='sortRec("price");'>Price <span ng-if='sort=="price" && reverse'>&#9650;</span><span ng-if='sort=="price" && !reverse'>&#9660;</span></th>
                            <th class='info sortBut' ng-click='sortRec("quantity");'>Quantity Required <span ng-if='sort=="quantity" && reverse'>&#9650;</span><span ng-if='sort=="quantity" && !reverse'>&#9660;</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat='recip in recipeList|orderBy:sort:reverse' ng-if='recip.quantity<quantLim'>
                            <td>{{recip.name}}</td>
                            <td>{{recip.price|gw2Currency}}</td>
                            <td>{{recip.quantity}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src='https://code.jquery.com/ui/1.11.4/jquery-ui.min.js' /></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
    <script src="./controllers/priceCalc.js"></script>
</body>

</html>
